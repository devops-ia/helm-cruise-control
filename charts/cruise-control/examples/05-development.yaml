# Development Environment Configuration Example
# This example shows a development setup with:
# - Debug logging enabled
# - Minimal resources
# - Local development settings
# - Single cluster for dev environment

image:
  repository: ghcr.io/devops-ia/kafka-cruise-control
  tag: "latest"
  pullPolicy: Always

replicaCount: 1

resources:
  limits:
    cpu: 500m
    memory: 1Gi
  requests:
    cpu: 200m
    memory: 512Mi

service:
  type: ClusterIP
  port: 80
  targetPort: 9090

livenessProbe:
  enabled: false

readinessProbe:
  enabled: false

podAnnotations:
  development/mode: "enabled"

# Configure default settings for all clusters
clustersDefaults:
  # Cluster configuration
  cluster:
    min.insync.replicas: 1
    default.replication.factor: 1

  # Capacity configuration for development
  capacity:
    type: capacity
    config: |
      {
        "brokerCapacities":[
          {
            "brokerId": "-1",
            "capacity": {
              "DISK": "100000",
              "CPU": "100",
              "NW_IN": "10000",
              "NW_OUT": "10000"
            },
            "doc": "Development capacity configuration."
          }
        ]
      }

  # Cruise Control configuration
  config:
    # METADATA CLIENT
    bootstrap.servers: "localhost:9092"
    client.id: "cruise-control-dev"

    # LOAD MONITOR
    broker.metric.sample.store.topic: "__KafkaCruiseControlModelTrainingSamples"
    partition.metric.sample.store.topic: "__KafkaCruiseControlPartitionMetricSamples"
    metric.sampler.class: com.linkedin.kafka.cruisecontrol.monitor.sampling.prometheus.PrometheusMetricSampler
    prometheus.server.endpoint: localhost:9090
    sample.store.topic.replication.factor: 1

    # ANOMALY DETECTOR
    anomaly.detection.interval.ms: "30000"
    self.healing.enabled: false

    # WEBSERVER
    webserver.http.port: 9090
    webserver.http.address: 0.0.0.0
    webserver.accesslog.enabled: true

  # Log4j configuration with DEBUG level
  log4j:
    rootLogger.level: DEBUG
    logger.cruisecontrol.level: debug
    logger.detector.level: debug
    logger.operationLogger.level: debug
    logger.CruiseControlPublicAccessLogger.level: debug

# Configure single development cluster
clusters:
  dev: {}
